;(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
;(function(t){var e=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(i,r,n){e.Backbone=t(e,n,i,r)})}else if(typeof exports!=="undefined"){var i=require("underscore"),r;try{r=require("jquery")}catch(n){}t(e,exports,i,r)}else{e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}})(function(t,e,i,r){var n=t.Backbone;var s=Array.prototype.slice;e.VERSION="1.3.3";e.$=r;e.noConflict=function(){t.Backbone=n;return this};e.emulateHTTP=false;e.emulateJSON=false;var a=function(t,e,r){switch(t){case 1:return function(){return i[e](this[r])};case 2:return function(t){return i[e](this[r],t)};case 3:return function(t,n){return i[e](this[r],o(t,this),n)};case 4:return function(t,n,s){return i[e](this[r],o(t,this),n,s)};default:return function(){var t=s.call(arguments);t.unshift(this[r]);return i[e].apply(i,t)}}};var h=function(t,e,r){i.each(e,function(e,n){if(i[n])t.prototype[n]=a(e,n,r)})};var o=function(t,e){if(i.isFunction(t))return t;if(i.isObject(t)&&!e._isModel(t))return l(t);if(i.isString(t))return function(e){return e.get(t)};return t};var l=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}};var u=e.Events={};var c=/\s+/;var f=function(t,e,r,n,s){var a=0,h;if(r&&typeof r==="object"){if(n!==void 0&&"context"in s&&s.context===void 0)s.context=n;for(h=i.keys(r);a<h.length;a++){e=f(t,e,h[a],r[h[a]],s)}}else if(r&&c.test(r)){for(h=r.split(c);a<h.length;a++){e=t(e,h[a],n,s)}}else{e=t(e,r,n,s)}return e};u.on=function(t,e,i){return d(this,t,e,i)};var d=function(t,e,i,r,n){t._events=f(v,t._events||{},e,i,{context:r,ctx:t,listening:n});if(n){var s=t._listeners||(t._listeners={});s[n.id]=n}return t};u.listenTo=function(t,e,r){if(!t)return this;var n=t._listenId||(t._listenId=i.uniqueId("l"));var s=this._listeningTo||(this._listeningTo={});var a=s[n];if(!a){var h=this._listenId||(this._listenId=i.uniqueId("l"));a=s[n]={obj:t,objId:n,id:h,listeningTo:s,count:0}}d(t,e,r,this,a);return this};var v=function(t,e,i,r){if(i){var n=t[e]||(t[e]=[]);var s=r.context,a=r.ctx,h=r.listening;if(h)h.count++;n.push({callback:i,context:s,ctx:s||a,listening:h})}return t};u.off=function(t,e,i){if(!this._events)return this;this._events=f(g,this._events,t,e,{context:i,listeners:this._listeners});return this};u.stopListening=function(t,e,r){var n=this._listeningTo;if(!n)return this;var s=t?[t._listenId]:i.keys(n);for(var a=0;a<s.length;a++){var h=n[s[a]];if(!h)break;h.obj.off(e,r,this)}return this};var g=function(t,e,r,n){if(!t)return;var s=0,a;var h=n.context,o=n.listeners;if(!e&&!r&&!h){var l=i.keys(o);for(;s<l.length;s++){a=o[l[s]];delete o[a.id];delete a.listeningTo[a.objId]}return}var u=e?[e]:i.keys(t);for(;s<u.length;s++){e=u[s];var c=t[e];if(!c)break;var f=[];for(var d=0;d<c.length;d++){var v=c[d];if(r&&r!==v.callback&&r!==v.callback._callback||h&&h!==v.context){f.push(v)}else{a=v.listening;if(a&&--a.count===0){delete o[a.id];delete a.listeningTo[a.objId]}}}if(f.length){t[e]=f}else{delete t[e]}}return t};u.once=function(t,e,r){var n=f(p,{},t,e,i.bind(this.off,this));if(typeof t==="string"&&r==null)e=void 0;return this.on(n,e,r)};u.listenToOnce=function(t,e,r){var n=f(p,{},e,r,i.bind(this.stopListening,this,t));return this.listenTo(t,n)};var p=function(t,e,r,n){if(r){var s=t[e]=i.once(function(){n(e,s);r.apply(this,arguments)});s._callback=r}return t};u.trigger=function(t){if(!this._events)return this;var e=Math.max(0,arguments.length-1);var i=Array(e);for(var r=0;r<e;r++)i[r]=arguments[r+1];f(m,this._events,t,void 0,i);return this};var m=function(t,e,i,r){if(t){var n=t[e];var s=t.all;if(n&&s)s=s.slice();if(n)_(n,r);if(s)_(s,[e].concat(r))}return t};var _=function(t,e){var i,r=-1,n=t.length,s=e[0],a=e[1],h=e[2];switch(e.length){case 0:while(++r<n)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<n)(i=t[r]).callback.call(i.ctx,s);return;case 2:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a);return;case 3:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a,h);return;default:while(++r<n)(i=t[r]).callback.apply(i.ctx,e);return}};u.bind=u.on;u.unbind=u.off;i.extend(e,u);var y=e.Model=function(t,e){var r=t||{};e||(e={});this.cid=i.uniqueId(this.cidPrefix);this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)r=this.parse(r,e)||{};var n=i.result(this,"defaults");r=i.defaults(i.extend({},n,r),n);this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(y.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(t==null)return this;var n;if(typeof t==="object"){n=t;r=e}else{(n={})[t]=e}r||(r={});if(!this._validate(n,r))return false;var s=r.unset;var a=r.silent;var h=[];var o=this._changing;this._changing=true;if(!o){this._previousAttributes=i.clone(this.attributes);this.changed={}}var l=this.attributes;var u=this.changed;var c=this._previousAttributes;for(var f in n){e=n[f];if(!i.isEqual(l[f],e))h.push(f);if(!i.isEqual(c[f],e)){u[f]=e}else{delete u[f]}s?delete l[f]:l[f]=e}if(this.idAttribute in n)this.id=this.get(this.idAttribute);if(!a){if(h.length)this._pending=r;for(var d=0;d<h.length;d++){this.trigger("change:"+h[d],this,l[h[d]],r)}}if(o)return this;if(!a){while(this._pending){r=this._pending;this._pending=false;this.trigger("change",this,r)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e=this._changing?this._previousAttributes:this.attributes;var r={};for(var n in t){var s=t[n];if(i.isEqual(e[n],s))continue;r[n]=s}return i.size(r)?r:false},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:true},t);var e=this;var r=t.success;t.success=function(i){var n=t.parse?e.parse(i,t):i;if(!e.set(n,t))return false;if(r)r.call(t.context,e,i,t);e.trigger("sync",e,i,t)};B(this,t);return this.sync("read",this,t)},save:function(t,e,r){var n;if(t==null||typeof t==="object"){n=t;r=e}else{(n={})[t]=e}r=i.extend({validate:true,parse:true},r);var s=r.wait;if(n&&!s){if(!this.set(n,r))return false}else if(!this._validate(n,r)){return false}var a=this;var h=r.success;var o=this.attributes;r.success=function(t){a.attributes=o;var e=r.parse?a.parse(t,r):t;if(s)e=i.extend({},n,e);if(e&&!a.set(e,r))return false;if(h)h.call(r.context,a,t,r);a.trigger("sync",a,t,r)};B(this,r);if(n&&s)this.attributes=i.extend({},o,n);var l=this.isNew()?"create":r.patch?"patch":"update";if(l==="patch"&&!r.attrs)r.attrs=n;var u=this.sync(l,this,r);this.attributes=o;return u},destroy:function(t){t=t?i.clone(t):{};var e=this;var r=t.success;var n=t.wait;var s=function(){e.stopListening();e.trigger("destroy",e,e.collection,t)};t.success=function(i){if(n)s();if(r)r.call(t.context,e,i,t);if(!e.isNew())e.trigger("sync",e,i,t)};var a=false;if(this.isNew()){i.defer(t.success)}else{B(this,t);a=this.sync("delete",this,t)}if(!n)s();return a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||F();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;if(!r)return true;this.trigger("invalid",this,r,i.extend(e,{validationError:r}));return false}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(y,b,"attributes");var x=e.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var w={add:true,remove:true,merge:true};var E={add:true,remove:false};var I=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var r=Array(t.length-i);var n=e.length;var s;for(s=0;s<r.length;s++)r[s]=t[s+i];for(s=0;s<n;s++)t[s+i]=e[s];for(s=0;s<r.length;s++)t[s+n+i]=r[s]};i.extend(x.prototype,u,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,E))},remove:function(t,e){e=i.extend({},e);var r=!i.isArray(t);t=r?[t]:t.slice();var n=this._removeModels(t,e);if(!e.silent&&n.length){e.changes={added:[],merged:[],removed:n};this.trigger("update",this,e)}return r?n[0]:n},set:function(t,e){if(t==null)return;e=i.extend({},w,e);if(e.parse&&!this._isModel(t)){t=this.parse(t,e)||[]}var r=!i.isArray(t);t=r?[t]:t.slice();var n=e.at;if(n!=null)n=+n;if(n>this.length)n=this.length;if(n<0)n+=this.length+1;var s=[];var a=[];var h=[];var o=[];var l={};var u=e.add;var c=e.merge;var f=e.remove;var d=false;var v=this.comparator&&n==null&&e.sort!==false;var g=i.isString(this.comparator)?this.comparator:null;var p,m;for(m=0;m<t.length;m++){p=t[m];var _=this.get(p);if(_){if(c&&p!==_){var y=this._isModel(p)?p.attributes:p;if(e.parse)y=_.parse(y,e);_.set(y,e);h.push(_);if(v&&!d)d=_.hasChanged(g)}if(!l[_.cid]){l[_.cid]=true;s.push(_)}t[m]=_}else if(u){p=t[m]=this._prepareModel(p,e);if(p){a.push(p);this._addReference(p,e);l[p.cid]=true;s.push(p)}}}if(f){for(m=0;m<this.length;m++){p=this.models[m];if(!l[p.cid])o.push(p)}if(o.length)this._removeModels(o,e)}var b=false;var x=!v&&u&&f;if(s.length&&x){b=this.length!==s.length||i.some(this.models,function(t,e){return t!==s[e]});this.models.length=0;I(this.models,s,0);this.length=this.models.length}else if(a.length){if(v)d=true;I(this.models,a,n==null?this.length:n);this.length=this.models.length}if(d)this.sort({silent:true});if(!e.silent){for(m=0;m<a.length;m++){if(n!=null)e.index=n+m;p=a[m];p.trigger("add",p,this,e)}if(d||b)this.trigger("sort",this,e);if(a.length||o.length||h.length){e.changes={added:a,removed:o,merged:h};this.trigger("update",this,e)}}return r?t[0]:t},reset:function(t,e){e=e?i.clone(e):{};for(var r=0;r<this.models.length;r++){this._removeReference(this.models[r],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return this.get(t)!=null},at:function(t){if(t<0)t+=this.length;return this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,true)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var r=e.length;if(i.isFunction(e))e=i.bind(e,this);if(r===1||i.isString(e)){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:true},t);var e=t.success;var r=this;t.success=function(i){var n=t.reset?"reset":"set";r[n](i,t);if(e)e.call(t.context,r,i,t);r.trigger("sync",r,i,t)};B(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var r=e.wait;t=this._prepareModel(t,e);if(!t)return false;if(!r)this.add(t,e);var n=this;var s=e.success;e.success=function(t,e,i){if(r)n.add(t,i);if(s)s.call(i.context,t,e,i)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(this._isModel(t)){if(!t.collection)t.collection=this;return t}e=e?i.clone(e):{};e.collection=this;var r=new this.model(t,e);if(!r.validationError)return r;this.trigger("invalid",this,r.validationError,e);return false},_removeModels:function(t,e){var i=[];for(var r=0;r<t.length;r++){var n=this.get(t[r]);if(!n)continue;var s=this.indexOf(n);this.models.splice(s,1);this.length--;delete this._byId[n.cid];var a=this.modelId(n.attributes);if(a!=null)delete this._byId[a];if(!e.silent){e.index=s;n.trigger("remove",n,this,e)}i.push(n);this._removeReference(n,e)}return i},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);if(i!=null)this._byId[i]=t;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);if(i!=null)delete this._byId[i];if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if(e){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(t==="change"){var n=this.modelId(e.previousAttributes());var s=this.modelId(e.attributes);if(n!==s){if(n!=null)delete this._byId[n];if(s!=null)this._byId[s]=e}}}this.trigger.apply(this,arguments)}});var S={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};h(x,S,"models");var k=e.View=function(t){this.cid=i.uniqueId("view");i.extend(this,i.pick(t,P));this._ensureElement();this.initialize.apply(this,arguments)};var T=/^(\S+)\s*(.*)$/;var P=["model","collection","el","id","attributes","className","tagName","events"];i.extend(k.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(t){this.undelegateEvents();this._setElement(t);this.delegateEvents();return this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0]},delegateEvents:function(t){t||(t=i.result(this,"events"));if(!t)return this;this.undelegateEvents();for(var e in t){var r=t[e];if(!i.isFunction(r))r=this[r];if(!r)continue;var n=e.match(T);this.delegate(n[1],n[2],i.bind(r,this))}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i);return this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,"attributes"));if(this.id)t.id=i.result(this,"id");if(this.className)t["class"]=i.result(this,"className");this.setElement(this._createElement(i.result(this,"tagName")));this._setAttributes(t)}else{this.setElement(i.result(this,"el"))}},_setAttributes:function(t){this.$el.attr(t)}});e.sync=function(t,r,n){var s=H[t];i.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(!n.url){a.url=i.result(r,"url")||F()}if(n.data==null&&r&&(t==="create"||t==="update"||t==="patch")){a.contentType="application/json";a.data=JSON.stringify(n.attrs||r.toJSON(n))}if(n.emulateJSON){a.contentType="application/x-www-form-urlencoded";a.data=a.data?{model:a.data}:{}}if(n.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){a.type="POST";if(n.emulateJSON)a.data._method=s;var h=n.beforeSend;n.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",s);if(h)return h.apply(this,arguments)}}if(a.type!=="GET"&&!n.emulateJSON){a.processData=false}var o=n.error;n.error=function(t,e,i){n.textStatus=e;n.errorThrown=i;if(o)o.call(n.context,t,e,i)};var l=n.xhr=e.ajax(i.extend(a,n));r.trigger("request",r,l,n);return l};var H={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var A=/\((.*?)\)/g;var C=/(\(\?)?:\w+/g;var R=/\*\w+/g;var j=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,u,{initialize:function(){},route:function(t,r,n){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(r)){n=r;r=""}if(!n)n=this[r];var s=this;e.history.route(t,function(i){var a=s._extractParameters(t,i);if(s.execute(n,a,r)!==false){s.trigger.apply(s,["route:"+r].concat(a));s.trigger("route",r,a);e.history.trigger("route",s,r,a)}});return this},execute:function(t,e,i){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,"routes");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(j,"\\$&").replace(A,"(?:$1)?").replace(C,function(t,e){return e?t:"([^/?]+)"}).replace(R,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){if(e===r.length-1)return t||null;return t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[];this.checkUrl=i.bind(this.checkUrl,this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var M=/^[#\/]|\s+$/g;var O=/^\/+|\/+$/g;var U=/#.*$/;N.started=false;i.extend(N.prototype,u,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname);var e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return t.charAt(0)==="/"?t.slice(1):t},getFragment:function(t){if(t==null){if(this._usePushState||!this._wantsHashChange){t=this.getPath()}else{t=this.getHash()}}return t.replace(M,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=true;this.options=i.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(O,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";this.location.replace(e+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var r=document.body;var n=r.insertBefore(this.iframe,r.firstChild).contentWindow;n.document.open();n.document.close();n.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState){s("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){s("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};if(this._usePushState){t("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){t("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);N.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getHash(this.iframe.contentWindow)}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){if(!this.matchRoot())return false;t=this.fragment=this.getFragment(t);return i.some(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!N.started)return false;if(!e||e===true)e={trigger:!!e};t=this.getFragment(t||"");var i=this.root;if(t===""||t.charAt(0)==="?"){i=i.slice(0,-1)||"/"}var r=i+t;t=this.decodeFragment(t.replace(U,""));if(this.fragment===t)return;this.fragment=t;if(this._usePushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,r)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var n=this.iframe.contentWindow;if(!e.replace){n.document.open();n.document.close()}this._updateHash(n.location,t,e.replace)}}else{return this.location.assign(r)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});e.history=new N;var q=function(t,e){var r=this;var n;if(t&&i.has(t,"constructor")){n=t.constructor}else{n=function(){return r.apply(this,arguments)}}i.extend(n,r,e);n.prototype=i.create(r.prototype,t);n.prototype.constructor=n;n.__super__=r.prototype;return n};y.extend=x.extend=$.extend=k.extend=N.extend=q;var F=function(){throw new Error('A "url" property or function must be specified')};var B=function(t,e){var i=e.error;e.error=function(r){if(i)i.call(e.context,t,r,e);t.trigger("error",t,r,e)}};return e});
!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.html2canvas=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,f,e){(function(h){
(function(H){var x=typeof e=="object"&&e;var P=typeof f=="object"&&f&&f.exports==x&&f;var G=typeof h=="object"&&h;if(G.global===G||G.window===G){H=G}var m,A=2147483647,t=36,v=1,y=26,q=38,u=700,w=72,p=128,N="-",D=/^xn--/,l=/[^ -~]/,i=/\x2E|\u3002|\uFF0E|\uFF61/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},o=t-v,J=Math.floor,F=String.fromCharCode,O;function I(Q){throw RangeError(z[Q])}function L(S,Q){var R=S.length;while(R--){S[R]=Q(S[R])}return S}function k(Q,R){return L(Q.split(i),R).join(".")}function s(T){var S=[],R=0,U=T.length,V,Q;while(R<U){V=T.charCodeAt(R++);if(V>=55296&&V<=56319&&R<U){Q=T.charCodeAt(R++);if((Q&64512)==56320){S.push(((V&1023)<<10)+(Q&1023)+65536)}else{S.push(V);R--}}else{S.push(V)}}return S}function K(Q){return L(Q,function(S){var R="";if(S>65535){S-=65536;R+=F(S>>>10&1023|55296);S=56320|S&1023}R+=F(S);return R}).join("")}function n(Q){if(Q-48<10){return Q-22}if(Q-65<26){return Q-65}if(Q-97<26){return Q-97}return t}function E(R,Q){return R+22+75*(R<26)-((Q!=0)<<5)}function j(T,R,S){var Q=0;T=S?J(T/u):T>>1;T+=J(T/R);for(;T>o*y>>1;Q+=t){T=J(T/o)}return J(Q+(o+1)*T/(T+q))}function C(ac){var S=[],V=ac.length,X,Y=0,R=p,Z=w,U,W,aa,Q,ad,T,ab,af,ae;U=ac.lastIndexOf(N);if(U<0){U=0}for(W=0;W<U;++W){if(ac.charCodeAt(W)>=128){I("not-basic")}S.push(ac.charCodeAt(W))}for(aa=U>0?U+1:0;aa<V;){for(Q=Y,ad=1,T=t;;T+=t){if(aa>=V){I("invalid-input")}ab=n(ac.charCodeAt(aa++));if(ab>=t||ab>J((A-Y)/ad)){I("overflow")}Y+=ab*ad;af=T<=Z?v:(T>=Z+y?y:T-Z);if(ab<af){break}ae=t-af;if(ad>J(A/ae)){I("overflow")}ad*=ae}X=S.length+1;Z=j(Y-Q,X,Q==0);if(J(Y/X)>A-R){I("overflow")}R+=J(Y/X);Y%=X;S.splice(Y++,0,R)}return K(S)}function r(ac){var T,ae,Z,R,aa,Y,U,Q,X,ag,ad,S=[],W,V,af,ab;ac=s(ac);W=ac.length;T=p;ae=0;aa=w;for(Y=0;Y<W;++Y){ad=ac[Y];if(ad<128){S.push(F(ad))}}Z=R=S.length;if(R){S.push(N)}while(Z<W){for(U=A,Y=0;Y<W;++Y){ad=ac[Y];if(ad>=T&&ad<U){U=ad}}V=Z+1;if(U-T>J((A-ae)/V)){I("overflow")}ae+=(U-T)*V;T=U;for(Y=0;Y<W;++Y){ad=ac[Y];if(ad<T&&++ae>A){I("overflow")}if(ad==T){for(Q=ae,X=t;;X+=t){ag=X<=aa?v:(X>=aa+y?y:X-aa);if(Q<ag){break}ab=Q-ag;af=t-ag;S.push(F(E(ag+ab%af,0)));Q=J(ab/af)}S.push(F(E(Q,0)));aa=j(ae,V,Z==R);ae=0;++Z}}++ae;++T}return S.join("")}function B(Q){return k(Q,function(R){return D.test(R)?C(R.slice(4).toLowerCase()):R})}function M(Q){return k(Q,function(R){return l.test(R)?"xn--"+r(R):R})}m={version:"1.2.4",ucs2:{decode:s,encode:K},decode:C,encode:r,toASCII:M,toUnicode:B};if(typeof d=="function"&&typeof d.amd=="object"&&d.amd){d("punycode",function(){return m})}else{if(x&&!x.nodeType){if(P){P.exports=m}else{for(O in m){m.hasOwnProperty(O)&&(x[O]=m[O])}}}else{H.punycode=m}}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(k,i,h){var j=k("./log");function e(n,m,o){if(n.defaultView&&(m!==n.defaultView.pageXOffset||o!==n.defaultView.pageYOffset)){n.defaultView.scrollTo(m,o)}}function g(m,n){try{if(n){n.width=m.width;n.height=m.height;n.getContext("2d").putImageData(m.getContext("2d").getImageData(0,0,m.width,m.height),0,0)}}catch(o){j("Unable to copy canvas content from",m,o)}}function f(n,m){var p=n.nodeType===3?document.createTextNode(n.nodeValue):n.cloneNode(false);var o=n.firstChild;while(o){if(m===true||o.nodeType!==1||o.nodeName!=="SCRIPT"){p.appendChild(f(o,m))}o=o.nextSibling}if(n.nodeType===1){p._scrollTop=n.scrollTop;p._scrollLeft=n.scrollLeft;if(n.nodeName==="CANVAS"){g(n,p)}else{if(n.nodeName==="TEXTAREA"||n.nodeName==="SELECT"){p.value=n.value}}}return p}function l(m){if(m.nodeType===1){m.scrollTop=m._scrollTop;m.scrollLeft=m._scrollLeft;var n=m.firstChild;while(n){l(n);n=n.nextSibling}}}i.exports=function(t,r,n,s,u,p,o){var q=f(t.documentElement,u.javascriptEnabled);var m=r.createElement("iframe");m.className="html2canvas-container";m.style.visibility="hidden";m.style.position="fixed";m.style.left="-10000px";m.style.top="0px";m.style.border="0";m.width=n;m.height=s;m.scrolling="no";r.body.appendChild(m);return new Promise(function(w){var v=m.contentWindow.document;m.contentWindow.onload=m.onload=function(){var x=setInterval(function(){if(v.body.childNodes.length>0){l(v.documentElement);clearInterval(x);if(u.type==="view"){m.contentWindow.scrollTo(p,o);if((/(iPad|iPhone|iPod)/g).test(navigator.userAgent)&&(m.contentWindow.scrollY!==o||m.contentWindow.scrollX!==p)){v.documentElement.style.top=(-o)+"px";v.documentElement.style.left=(-p)+"px";v.documentElement.style.position="absolute"}}w(m)}},50)};v.open();v.write("<!DOCTYPE html><html></html>");e(t,p,o);v.replaceChild(v.adoptNode(q),v.documentElement);v.close()})}},{"./log":13}],3:[function(h,i,j){function g(o){this.r=0;this.g=0;this.b=0;this.a=null;var n=this.fromArray(o)||this.namedColor(o)||this.rgb(o)||this.rgba(o)||this.hex6(o)||this.hex3(o)}g.prototype.darken=function(o){var n=1-o;return new g([Math.round(this.r*n),Math.round(this.g*n),Math.round(this.b*n),this.a])};g.prototype.isTransparent=function(){return this.a===0};g.prototype.isBlack=function(){return this.r===0&&this.g===0&&this.b===0};g.prototype.fromArray=function(n){if(Array.isArray(n)){this.r=Math.min(n[0],255);this.g=Math.min(n[1],255);this.b=Math.min(n[2],255);if(n.length>3){this.a=n[3]}}return(Array.isArray(n))};var l=/^#([a-f0-9]{3})$/i;g.prototype.hex3=function(o){var n=null;if((n=o.match(l))!==null){this.r=parseInt(n[1][0]+n[1][0],16);this.g=parseInt(n[1][1]+n[1][1],16);this.b=parseInt(n[1][2]+n[1][2],16)}return n!==null};var k=/^#([a-f0-9]{6})$/i;g.prototype.hex6=function(o){var n=null;if((n=o.match(k))!==null){this.r=parseInt(n[1].substring(0,2),16);this.g=parseInt(n[1].substring(2,4),16);this.b=parseInt(n[1].substring(4,6),16)}return n!==null};var m=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;g.prototype.rgb=function(o){var n=null;if((n=o.match(m))!==null){this.r=Number(n[1]);this.g=Number(n[2]);this.b=Number(n[3])}return n!==null};var f=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;g.prototype.rgba=function(o){var n=null;if((n=o.match(f))!==null){this.r=Number(n[1]);this.g=Number(n[2]);this.b=Number(n[3]);this.a=Number(n[4])}return n!==null};g.prototype.toString=function(){return this.a!==null&&this.a!==1?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"};g.prototype.namedColor=function(o){o=o.toLowerCase();var n=e[o];if(n){this.r=n[0];this.g=n[1];this.b=n[2]}else{if(o==="transparent"){this.r=this.g=this.b=this.a=0;return true}}return !!n};g.prototype.isColor=true;var e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};i.exports=g},{}],4:[function(k,e,B){var v=k("./support");var u=k("./renderers/canvas");var r=k("./imageloader");var m=k("./nodeparser");var g=k("./nodecontainer");var n=k("./log");var A=k("./utils");var y=k("./clone");var j=k("./proxy").loadUrlDocument;var l=A.getBounds;var o="data-html2canvas-node";var q=0;function z(F,E){var D=q++;E=E||{};if(E.logging){n.options.logging=true;n.options.start=Date.now()}E.async=typeof(E.async)==="undefined"?true:E.async;E.allowTaint=typeof(E.allowTaint)==="undefined"?false:E.allowTaint;E.removeContainer=typeof(E.removeContainer)==="undefined"?true:E.removeContainer;E.javascriptEnabled=typeof(E.javascriptEnabled)==="undefined"?false:E.javascriptEnabled;E.imageTimeout=typeof(E.imageTimeout)==="undefined"?10000:E.imageTimeout;E.renderer=typeof(E.renderer)==="function"?E.renderer:u;E.strict=!!E.strict;if(typeof(F)==="string"){if(typeof(E.proxy)!=="string"){return Promise.reject("Proxy must be used when rendering url")}var G=E.width!=null?E.width:window.innerWidth;var C=E.height!=null?E.height:window.innerHeight;return j(w(F),E.proxy,document,G,C,E).then(function(I){return t(I.contentWindow.document.documentElement,I,E,G,C)})}var H=((F===undefined)?[document.documentElement]:((F.length)?F:[F]))[0];H.setAttribute(o+D,D);var G=E.width!=null?E.width:H.ownerDocument.defaultView.innerWidth;var C=E.height!=null?E.height:H.ownerDocument.defaultView.innerHeight;return f(H.ownerDocument,E,G,C,D).then(function(I){if(typeof(E.onrendered)==="function"){n("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas");E.onrendered(I)}return I})}z.CanvasRenderer=u;z.NodeContainer=g;z.log=n;z.utils=A;var p=(typeof(document)==="undefined"||typeof(Object.create)!=="function"||typeof(document.createElement("canvas").getContext)!=="function")?function(){return Promise.reject("No canvas support")}:z;e.exports=p;if(typeof(d)==="function"&&d.amd){d("html2canvas",[],function(){return p})}function f(D,E,F,G,C){return y(D,D,F,G,E,D.defaultView.pageXOffset,D.defaultView.pageYOffset).then(function(I){n("Document cloned");var J=o+C;var H="["+J+"='"+C+"']";D.querySelector(H).removeAttribute(J);var M=I.contentWindow;var L=M.document.querySelector(H);var K=(typeof(E.onclone)==="function")?Promise.resolve(E.onclone(M.document)):Promise.resolve(true);return K.then(function(){return t(L,I,E,F,G)})})}function t(I,F,O,H,D){var K=F.contentWindow;var M=new v(K.document);var J=new r(O,M);var C=l(I);var G=O.type==="view"?H:h(K.document);var N=O.type==="view"?D:s(K.document);var L=new O.renderer(G,N,J,O,document);var E=new m(I,L,M,J,O);return E.ready.then(function(){n("Finished rendering");var P;if(O.type==="view"){P=i(L.canvas,{width:L.canvas.width,height:L.canvas.height,top:0,left:0,x:0,y:0})}else{if(I===K.document.body||I===K.document.documentElement||O.canvas!=null){P=L.canvas}else{P=i(L.canvas,{width:O.width!=null?O.width:C.width,height:O.height!=null?O.height:C.height,top:C.top,left:C.left,x:0,y:0})}}x(F,O);return P})}function x(C,D){if(D.removeContainer){C.parentNode.removeChild(C);n("Cleaned up container")}}function i(G,C){var H=document.createElement("canvas");var F=Math.min(G.width-1,Math.max(0,C.left));var D=Math.min(G.width,Math.max(1,C.left+C.width));var J=Math.min(G.height-1,Math.max(0,C.top));var I=Math.min(G.height,Math.max(1,C.top+C.height));H.width=C.width;H.height=C.height;var E=D-F;var K=I-J;n("Cropping canvas at:","left:",C.left,"top:",C.top,"width:",E,"height:",K);n("Resulting crop with width",C.width,"and height",C.height,"with x",F,"and y",J);H.getContext("2d").drawImage(G,F,J,E,K,C.x,C.y,E,K);return H}function h(C){return Math.max(Math.max(C.body.scrollWidth,C.documentElement.scrollWidth),Math.max(C.body.offsetWidth,C.documentElement.offsetWidth),Math.max(C.body.clientWidth,C.documentElement.clientWidth))}function s(C){return Math.max(Math.max(C.body.scrollHeight,C.documentElement.scrollHeight),Math.max(C.body.offsetHeight,C.documentElement.offsetHeight),Math.max(C.body.clientHeight,C.documentElement.clientHeight))}function w(C){var D=document.createElement("a");D.href=C;D.href=D.href;return D}},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(h,f,e){var g=h("./log");var i=h("./utils").smallImage;function j(l){this.src=l;g("DummyImageContainer for",l);if(!this.promise||!this.image){g("Initiating DummyImageContainer");j.prototype.image=new Image();var k=this.image;j.prototype.promise=new Promise(function(n,m){k.onload=n;k.onerror=m;k.src=i();if(k.complete===true){n(k)}})}}f.exports=j},{"./log":13,"./utils":26}],6:[function(g,f,e){var h=g("./utils").smallImage;function i(o,m){var j=document.createElement("div"),k=document.createElement("img"),n=document.createElement("span"),q="Hidden Text",p,l;j.style.visibility="hidden";j.style.fontFamily=o;j.style.fontSize=m;j.style.margin=0;j.style.padding=0;document.body.appendChild(j);k.src=h();k.width=1;k.height=1;k.style.margin=0;k.style.padding=0;k.style.verticalAlign="baseline";n.style.fontFamily=o;n.style.fontSize=m;n.style.margin=0;n.style.padding=0;n.appendChild(document.createTextNode(q));j.appendChild(n);j.appendChild(k);p=(k.offsetTop-n.offsetTop)+1;j.removeChild(n);j.appendChild(document.createTextNode(q));j.style.lineHeight="normal";k.style.verticalAlign="super";l=(k.offsetTop-j.offsetTop)+1;document.body.removeChild(j);this.baseline=p;this.lineWidth=1;this.middle=l}f.exports=i},{"./utils":26}],7:[function(g,f,e){var i=g("./font");function h(){this.data={}}h.prototype.getMetrics=function(k,j){if(this.data[k+"-"+j]===undefined){this.data[k+"-"+j]=new i(k,j)}return this.data[k+"-"+j]};f.exports=h},{"./font":6}],8:[function(j,i,f){var e=j("./utils");var h=e.getBounds;var g=j("./proxy").loadUrlDocument;function k(l,p,n){this.image=null;this.src=l;var m=this;var o=h(l);this.promise=(!p?this.proxyLoad(n.proxy,o,n):new Promise(function(q){if(l.contentWindow.document.URL==="about:blank"||l.contentWindow.document.documentElement==null){l.contentWindow.onload=l.onload=function(){q(l)}}else{q(l)}})).then(function(q){var r=j("./core");return r(q.contentWindow.document.documentElement,{type:"view",width:q.width,height:q.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(q){return m.image=q})}k.prototype.proxyLoad=function(n,o,m){var l=this.src;return g(l.src,n,l.ownerDocument,o.width,o.height,m)};i.exports=k},{"./core":4,"./proxy":16,"./utils":26}],9:[function(g,f,e){function h(i){this.src=i.value;this.colorStops=[];this.type=null;this.x0=0.5;this.y0=0.5;this.x1=0.5;this.y1=0.5;this.promise=Promise.resolve(true)}h.TYPES={LINEAR:1,RADIAL:2};h.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i;f.exports=h},{}],10:[function(g,f,e){function h(k,j){this.src=k;this.image=new Image();var i=this;this.tainted=null;this.promise=new Promise(function(m,l){i.image.onload=m;i.image.onerror=l;if(j){i.image.crossOrigin="anonymous"}i.image.src=k;if(i.image.complete===true){m(i.image)}})}f.exports=h},{}],11:[function(f,g,j){var i=f("./log");var o=f("./imagecontainer");var n=f("./dummyimagecontainer");var e=f("./proxyimagecontainer");var h=f("./framecontainer");var l=f("./svgcontainer");var r=f("./svgnodecontainer");var q=f("./lineargradientcontainer");var k=f("./webkitgradientcontainer");var m=f("./utils").bind;function p(s,t){this.link=null;this.options=s;this.support=t;this.origin=this.getOrigin(window.location.href)}p.prototype.findImages=function(t){var s=[];t.reduce(function(v,u){switch(u.node.nodeName){case"IMG":return v.concat([{args:[u.node.src],method:"url"}]);case"svg":case"IFRAME":return v.concat([{args:[u.node],method:u.node.nodeName}])}return v},[]).forEach(this.addImage(s,this.loadImage),this);return s};p.prototype.findBackgroundImage=function(s,t){t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(s,this.loadImage),this);return s};p.prototype.addImage=function(s,t){return function(u){u.args.forEach(function(v){if(!this.imageExists(s,v)){s.splice(0,0,t.call(this,u));i("Added image #"+(s.length),typeof(v)==="string"?v.substring(0,100):v)}},this)}};p.prototype.hasImageBackground=function(s){return s.method!=="none"};p.prototype.loadImage=function(t){if(t.method==="url"){var s=t.args[0];if(this.isSVG(s)&&!this.support.svg&&!this.options.allowTaint){return new l(s)}else{if(s.match(/data:image\/.*;base64,/i)){return new o(s.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),false)}else{if(this.isSameOrigin(s)||this.options.allowTaint===true||this.isSVG(s)){return new o(s,false)}else{if(this.support.cors&&!this.options.allowTaint&&this.options.useCORS){return new o(s,true)}else{if(this.options.proxy){return new e(s,this.options.proxy)}else{return new n(s)}}}}}}else{if(t.method==="linear-gradient"){return new q(t)}else{if(t.method==="gradient"){return new k(t)}else{if(t.method==="svg"){return new r(t.args[0],this.support.svg)}else{if(t.method==="IFRAME"){return new h(t.args[0],this.isSameOrigin(t.args[0].src),this.options)}else{return new n(t)}}}}}};p.prototype.isSVG=function(s){return s.substring(s.length-3).toLowerCase()==="svg"||l.prototype.isInline(s)};p.prototype.imageExists=function(s,t){return s.some(function(u){return u.src===t})};p.prototype.isSameOrigin=function(s){return(this.getOrigin(s)===this.origin)};p.prototype.getOrigin=function(s){var t=this.link||(this.link=document.createElement("a"));t.href=s;t.href=t.href;return t.protocol+t.hostname+t.port};p.prototype.getPromise=function(s){return this.timeout(s,this.options.imageTimeout)["catch"](function(){var t=new n(s.src);return t.promise.then(function(u){s.image=u})})};p.prototype.get=function(t){var s=null;return this.images.some(function(u){return(s=u).src===t})?s:null};p.prototype.fetch=function(s){this.images=s.reduce(m(this.findBackgroundImage,this),this.findImages(s));this.images.forEach(function(u,t){u.promise.then(function(){i("Succesfully loaded image #"+(t+1),u)},function(v){i("Failed loading image #"+(t+1),u,v)})});this.ready=Promise.all(this.images.map(this.getPromise,this));i("Finished searching images");return this};p.prototype.timeout=function(s,t){var v;var u=Promise.race([s.promise,new Promise(function(w,x){v=setTimeout(function(){i("Timed out loading image",s);x(s)},t)})]).then(function(w){clearTimeout(v);return w});u["catch"](function(){clearTimeout(v)});return u};g.exports=p},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(h,g,f){var i=h("./gradientcontainer");var j=h("./color");function e(l){i.apply(this,arguments);this.type=i.TYPES.LINEAR;var k=e.REGEXP_DIRECTION.test(l.args[0])||!i.REGEXP_COLORSTOP.test(l.args[0]);if(k){l.args[0].split(/\s+/).reverse().forEach(function(m,n){switch(m){case"left":this.x0=0;this.x1=1;break;case"top":this.y0=0;this.y1=1;break;case"right":this.x0=1;this.x1=0;break;case"bottom":this.y0=1;this.y1=0;break;case"to":var q=this.y0;var o=this.x0;this.y0=this.y1;this.x0=this.x1;this.x1=o;this.y1=q;break;case"center":break;default:var p=parseFloat(m,10)*0.01;if(isNaN(p)){break}if(n===0){this.y0=p;this.y1=1-this.y0}else{this.x0=p;this.x1=1-this.x0}break}},this)}else{this.y0=0;this.y1=1}this.colorStops=l.args.slice(k?1:0).map(function(m){var n=m.match(i.REGEXP_COLORSTOP);var p=+n[2];var o=p===0?"%":n[3];return{color:new j(n[1]),stop:o==="%"?p/100:null}});if(this.colorStops[0].stop===null){this.colorStops[0].stop=0}if(this.colorStops[this.colorStops.length-1].stop===null){this.colorStops[this.colorStops.length-1].stop=1}this.colorStops.forEach(function(m,n){if(m.stop===null){this.colorStops.slice(n).some(function(p,o){if(p.stop!==null){m.stop=((p.stop-this.colorStops[n-1].stop)/(o+1))+this.colorStops[n-1].stop;return true}else{return false}},this)}},this)}e.prototype=Object.create(i.prototype);e.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i;g.exports=e},{"./color":3,"./gradientcontainer":9}],13:[function(h,g,e){var f=function(){if(f.options.logging&&window.console&&window.console.log){Function.prototype.bind.call(window.console.log,(window.console)).apply(window.console,[(Date.now()-f.options.start)+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}};f.options={logging:false};g.exports=f},{}],14:[function(g,h,k){var e=g("./color");var p=g("./utils");var m=p.getBounds;var o=p.parseBackgrounds;var i=p.offsetBounds;function j(t,s){this.node=t;this.parent=s;this.stack=null;this.bounds=null;this.borders=null;this.clip=[];this.backgroundClip=[];this.offsetBounds=null;this.visible=null;this.computedStyles=null;this.colors={};this.styles={};this.backgroundImages=null;this.transformData=null;this.transformMatrix=null;this.isPseudoElement=false;this.opacity=null}j.prototype.cloneTo=function(s){s.visible=this.visible;s.borders=this.borders;s.bounds=this.bounds;s.clip=this.clip;s.backgroundClip=this.backgroundClip;s.computedStyles=this.computedStyles;s.styles=this.styles;s.backgroundImages=this.backgroundImages;s.opacity=this.opacity};j.prototype.getOpacity=function(){return this.opacity===null?(this.opacity=this.cssFloat("opacity")):this.opacity};j.prototype.assignStack=function(s){this.stack=s;s.children.push(this)};j.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:(this.css("display")!=="none"&&this.css("visibility")!=="hidden"&&!this.node.hasAttribute("data-html2canvas-ignore")&&(this.node.nodeName!=="INPUT"||this.node.getAttribute("type")!=="hidden"))};j.prototype.css=function(s){if(!this.computedStyles){this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)}return this.styles[s]||(this.styles[s]=this.computedStyles[s])};j.prototype.prefixedCss=function(s){var u=["webkit","moz","ms","o"];var t=this.css(s);if(t===undefined){u.some(function(v){t=this.css(v+s.substr(0,1).toUpperCase()+s.substr(1));return t!==undefined},this)}return t===undefined?null:t};j.prototype.computedStyle=function(s){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,s)};j.prototype.cssInt=function(s){var t=parseInt(this.css(s),10);return(isNaN(t))?0:t};j.prototype.color=function(s){return this.colors[s]||(this.colors[s]=new e(this.css(s)))};j.prototype.cssFloat=function(s){var t=parseFloat(this.css(s));return(isNaN(t))?0:t};j.prototype.fontWeight=function(){var s=this.css("fontWeight");switch(parseInt(s,10)){case 401:s="bold";break;case 400:s="normal";break}return s};j.prototype.parseClip=function(){var s=this.css("clip").match(this.CLIP);if(s){return{top:parseInt(s[1],10),right:parseInt(s[2],10),bottom:parseInt(s[3],10),left:parseInt(s[4],10)}}return null};j.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=o(this.css("backgroundImage")))};j.prototype.cssList=function(u,s){var t=(this.css(u)||"").split(",");t=t[s||0]||t[0]||"auto";t=t.trim().split(" ");if(t.length===1){t=[t[0],n(t[0])?"auto":t[0]]}return t};j.prototype.parseBackgroundSize=function(y,z,u){var w=this.cssList("backgroundSize",u);var x,s;if(n(w[0])){x=y.width*parseFloat(w[0])/100}else{if(/contain|cover/.test(w[0])){var v=y.width/y.height,t=z.width/z.height;return(v<t^w[0]==="contain")?{width:y.height*t,height:y.height}:{width:y.width,height:y.width/t}}else{x=parseInt(w[0],10)}}if(w[0]==="auto"&&w[1]==="auto"){s=z.height}else{if(w[1]==="auto"){s=x/z.width*z.height}else{if(n(w[1])){s=y.height*parseFloat(w[1])/100}else{s=parseInt(w[1],10)}}}if(w[0]==="auto"){x=s/z.height*z.width}return{width:x,height:s}};j.prototype.parseBackgroundPosition=function(v,y,u,t){var s=this.cssList("backgroundPosition",u);var x,w;if(n(s[0])){x=(v.width-(t||y).width)*(parseFloat(s[0])/100)}else{x=parseInt(s[0],10)}if(s[1]==="auto"){w=x/y.width*y.height}else{if(n(s[1])){w=(v.height-(t||y).height)*parseFloat(s[1])/100}else{w=parseInt(s[1],10)}}if(s[0]==="auto"){x=w/y.height*y.width}return{left:x,top:w}};j.prototype.parseBackgroundRepeat=function(s){return this.cssList("backgroundRepeat",s)[0]};j.prototype.parseTextShadows=function(){var x=this.css("textShadow");var u=[];if(x&&x!=="none"){var w=x.match(this.TEXT_SHADOW_PROPERTY);for(var t=0;w&&(t<w.length);t++){var v=w[t].match(this.TEXT_SHADOW_VALUES);u.push({color:new e(v[0]),offsetX:v[1]?parseFloat(v[1].replace("px","")):0,offsetY:v[2]?parseFloat(v[2].replace("px","")):0,blur:v[3]?v[3].replace("px",""):0})}}return u};j.prototype.parseTransform=function(){if(!this.transformData){if(this.hasTransform()){var t=this.parseBounds();var s=this.prefixedCss("transformOrigin").split(" ").map(f).map(r);s[0]+=t.left;s[1]+=t.top;this.transformData={origin:s,matrix:this.parseTransformMatrix()}}else{this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]}}}return this.transformData};j.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform");var s=t?q(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=s?s:[1,0,0,1,0,0]}return this.transformMatrix};j.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?i(this.node):m(this.node))};j.prototype.hasTransform=function(){return this.parseTransformMatrix().join(",")!=="1,0,0,1,0,0"||(this.parent&&this.parent.hasTransform())};j.prototype.getValue=function(){var s=this.node.value||"";if(this.node.tagName==="SELECT"){s=l(this.node)}else{if(this.node.type==="password"){s=Array(s.length+1).join("\u2022")}}return s.length===0?(this.node.placeholder||""):s};j.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/;j.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;j.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;j.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;function l(t){var s=t.options[t.selectedIndex||0];return s?(s.text||""):""}function q(s){if(s&&s[1]==="matrix"){return s[2].split(",").map(function(u){return parseFloat(u.trim())})}else{if(s&&s[1]==="matrix3d"){var t=s[2].split(",").map(function(u){return parseFloat(u.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}}function n(s){return s.toString().indexOf("%")!==-1}function f(s){return s.replace("px","")}function r(s){return parseFloat(s)}h.exports=j},{"./color":3,"./utils":26}],15:[function(D,j,U){var r=D("./log");var O=D("punycode");var p=D("./nodecontainer");var T=D("./textcontainer");var i=D("./pseudoelementcontainer");var x=D("./fontmetrics");var z=D("./color");var g=D("./stackingcontext");var af=D("./utils");var o=af.bind;var s=af.getBounds;var P=af.parseBackgrounds;var V=af.offsetBounds;function L(ai,am,ak,ag,ah){r("Starting NodeParser");this.renderer=am;this.options=ah;this.range=null;this.support=ak;this.renderQueue=[];this.stack=new g(true,1,ai.ownerDocument,null);var aj=new p(ai,null);if(ah.background){am.rectangle(0,0,am.width,am.height,new z(ah.background))}if(ai===ai.ownerDocument.documentElement){var al=new p(aj.color("backgroundColor").isTransparent()?ai.ownerDocument.body:ai.ownerDocument.documentElement,null);am.rectangle(0,0,am.width,am.height,al.color("backgroundColor"))}aj.visibile=aj.isElementVisible();this.createPseudoHideStyles(ai.ownerDocument);this.disableAnimations(ai.ownerDocument);this.nodes=H([aj].concat(this.getChildren(aj)).filter(function(an){return an.visible=an.isElementVisible()}).map(this.getPseudoElements,this));this.fontMetrics=new x();r("Fetched nodes, total:",this.nodes.length);r("Calculate overflow clips");this.calculateOverflowClips();r("Start fetching images");this.images=ag.fetch(this.nodes.filter(aa));this.ready=this.images.ready.then(o(function(){r("Images loaded, starting parsing");r("Creating stacking contexts");this.createStackingContexts();r("Sorting stacking contexts");this.sortStackingContexts(this.stack);this.parse(this.stack);r("Render queue created with "+this.renderQueue.length+" items");return new Promise(o(function(an){if(!ah.async){this.renderQueue.forEach(this.paint,this);an()}else{if(typeof(ah.async)==="function"){ah.async.call(this,this.renderQueue,an)}else{if(this.renderQueue.length>0){this.renderIndex=0;this.asyncRenderer(this.renderQueue,an)}else{an()}}}},this))},this))}L.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(ag){if(aa(ag)){if(f(ag)){ag.appendToDOM()}ag.borders=this.parseBorders(ag);var ai=(ag.css("overflow")==="hidden")?[ag.borders.clip]:[];var ah=ag.parseClip();if(ah&&["absolute","fixed"].indexOf(ag.css("position"))!==-1){ai.push([["rect",ag.bounds.left+ah.left,ag.bounds.top+ah.top,ah.right-ah.left,ah.bottom-ah.top]])}ag.clip=l(ag)?ag.parent.clip.concat(ai):ai;ag.backgroundClip=(ag.css("overflow")!=="hidden")?ag.clip.concat([ag.borders.clip]):ag.clip;if(f(ag)){ag.cleanDOM()}}else{if(y(ag)){ag.clip=l(ag)?ag.parent.clip:[]}}if(!f(ag)){ag.bounds=null}},this)};function l(ag){return ag.parent&&ag.parent.clip.length}L.prototype.asyncRenderer=function(ag,ah,ai){ai=ai||Date.now();this.paint(ag[this.renderIndex++]);if(ag.length===this.renderIndex){ah()}else{if(ai+20>Date.now()){this.asyncRenderer(ag,ah,ai)}else{setTimeout(o(function(){this.asyncRenderer(ag,ah)},this),0)}}};L.prototype.createPseudoHideStyles=function(ag){this.createStyles(ag,"."+i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')};L.prototype.disableAnimations=function(ag){this.createStyles(ag,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")};L.prototype.createStyles=function(ag,ah){var ai=ag.createElement("style");ai.innerHTML=ah;ag.body.appendChild(ai)};L.prototype.getPseudoElements=function(ag){var ah=[[ag]];if(ag.node.nodeType===Node.ELEMENT_NODE){var ai=this.getPseudoElement(ag,":before");var aj=this.getPseudoElement(ag,":after");if(ai){ah.push(ai)}if(aj){ah.push(aj)}}return H(ah)};function B(ag){return ag.replace(/(\-[a-z])/g,function(ah){return ah.toUpperCase().replace("-","")})}L.prototype.getPseudoElement=function(ah,am){var ag=ah.computedStyle(am);if(!ag||!ag.content||ag.content==="none"||ag.content==="-moz-alt-content"||ag.display==="none"){return null}var ak=n(ag.content);var ai=ak.substr(0,3)==="url";var al=document.createElement(ai?"img":"html2canvaspseudoelement");var ap=new i(al,ah,am);for(var aj=ag.length-1;aj>=0;aj--){var an=B(ag.item(aj));al.style[an]=ag[an]}al.className=i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;if(ai){al.src=P(ak)[0].args[0];return[ap]}else{var ao=document.createTextNode(ak);al.appendChild(ao);return[ap,new T(ao,ap)]}};L.prototype.getChildren=function(ag){return H([].filter.call(ag.node.childNodes,R).map(function(ai){var ah=[ai.nodeType===Node.TEXT_NODE?new T(ai,ag):new p(ai,ag)].filter(J);return ai.nodeType===Node.ELEMENT_NODE&&ah.length&&ai.tagName!=="TEXTAREA"?(ah[0].isElementVisible()?ah.concat(this.getChildren(ah[0])):[]):ah},this))};L.prototype.newStackingContext=function(ai,aj){var ah=new g(aj,ai.getOpacity(),ai.node,ai.parent);ai.cloneTo(ah);var ag=aj?ah.getParentStack(this):ah.parent.stack;ag.contexts.push(ah);ai.stack=ah};L.prototype.createStackingContexts=function(){this.nodes.forEach(function(ag){if(aa(ag)&&(this.isRootElement(ag)||M(ag)||q(ag)||this.isBodyWithTransparentRoot(ag)||ag.hasTransform())){this.newStackingContext(ag,true)}else{if(aa(ag)&&((Z(ag)&&I(ag))||Y(ag)||N(ag))){this.newStackingContext(ag,false)}else{ag.assignStack(ag.parent.stack)}}},this)};L.prototype.isBodyWithTransparentRoot=function(ag){return ag.node.nodeName==="BODY"&&ag.parent.color("backgroundColor").isTransparent()};L.prototype.isRootElement=function(ag){return ag.parent===null};L.prototype.sortStackingContexts=function(ag){ag.contexts.sort(C(ag.contexts.slice(0)));ag.contexts.forEach(this.sortStackingContexts,this)};L.prototype.parseTextBounds=function(ag){return function(al,ah,am){if(ag.parent.css("textDecoration").substr(0,4)!=="none"||al.trim().length!==0){if(this.support.rangeBounds&&!ag.parent.hasTransform()){var ak=am.slice(0,ah).join("").length;return this.getRangeBounds(ag.node,ak,al.length)}else{if(ag.node&&typeof(ag.node.data)==="string"){var aj=ag.node.splitText(al.length);var ai=this.getWrapperBounds(ag.node,ag.parent.hasTransform());ag.node=aj;return ai}}}else{if(!this.support.rangeBounds||ag.parent.hasTransform()){ag.node=ag.node.splitText(al.length)}}return{}}};L.prototype.getWrapperBounds=function(ak,ag){var al=ak.ownerDocument.createElement("html2canvaswrapper");var ah=ak.parentNode,aj=ak.cloneNode(true);al.appendChild(ak.cloneNode(true));ah.replaceChild(al,ak);var ai=ag?V(al):s(al);ah.replaceChild(aj,al);return ai};L.prototype.getRangeBounds=function(ai,aj,ah){var ag=this.range||(this.range=ai.ownerDocument.createRange());ag.setStart(ai,aj);ag.setEnd(ai,aj+ah);return ag.getBoundingClientRect()};function ac(){}L.prototype.parse=function(al){var am=al.contexts.filter(e);var ai=al.children.filter(aa);var aj=ai.filter(Q(N));var an=aj.filter(Q(Z)).filter(Q(u));var ak=ai.filter(Q(Z)).filter(N);var ag=aj.filter(Q(Z)).filter(u);var ap=al.contexts.concat(aj.filter(Z)).filter(I);var ao=al.children.filter(y).filter(w);var ah=al.contexts.filter(E);am.concat(an).concat(ak).concat(ag).concat(ap).concat(ao).concat(ah).forEach(function(aq){this.renderQueue.push(aq);if(A(aq)){this.parse(aq);this.renderQueue.push(new ac())}},this)};L.prototype.paint=function(ag){try{if(ag instanceof ac){this.renderer.ctx.restore()}else{if(y(ag)){if(f(ag.parent)){ag.parent.appendToDOM()}this.paintText(ag);if(f(ag.parent)){ag.parent.cleanDOM()}}else{this.paintNode(ag)}}}catch(ah){r(ah);if(this.options.strict){throw ah}}};L.prototype.paintNode=function(ag){if(A(ag)){this.renderer.setOpacity(ag.opacity);this.renderer.ctx.save();if(ag.hasTransform()){this.renderer.setTransform(ag.parseTransform())}}if(ag.node.nodeName==="INPUT"&&ag.node.type==="checkbox"){this.paintCheckbox(ag)}else{if(ag.node.nodeName==="INPUT"&&ag.node.type==="radio"){this.paintRadio(ag)}else{this.paintElement(ag)}}};L.prototype.paintElement=function(ag){var ah=ag.parseBounds();this.renderer.clip(ag.backgroundClip,function(){this.renderer.renderBackground(ag,ah,ag.borders.borders.map(ab))},this);this.renderer.clip(ag.clip,function(){this.renderer.renderBorders(ag.borders.borders)},this);this.renderer.clip(ag.backgroundClip,function(){switch(ag.node.nodeName){case"svg":case"IFRAME":var ai=this.images.get(ag.node);if(ai){this.renderer.renderImage(ag,ah,ag.borders,ai)}else{r("Error loading <"+ag.node.nodeName+">",ag.node)}break;case"IMG":var aj=this.images.get(ag.node.src);if(aj){this.renderer.renderImage(ag,ah,ag.borders,aj)}else{r("Error loading <img>",ag.node.src)}break;case"CANVAS":this.renderer.renderImage(ag,ah,ag.borders,{image:ag.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(ag);break}},this)};L.prototype.paintCheckbox=function(ai){var ah=ai.parseBounds();var aj=Math.min(ah.width,ah.height);var al={width:aj-1,height:aj-1,top:ah.top,left:ah.left};var ak=[3,3];var ag=[ak,ak,ak,ak];var an=[1,1,1,1].map(function(ao){return{color:new z("#A5A5A5"),width:ao}});var am=k(al,ag,an);this.renderer.clip(ai.backgroundClip,function(){this.renderer.rectangle(al.left+1,al.top+1,al.width-2,al.height-2,new z("#DEDEDE"));this.renderer.renderBorders(G(an,al,am,ag));if(ai.node.checked){this.renderer.font(new z("#424242"),"normal","normal","bold",(aj-3)+"px","arial");this.renderer.text("\u2714",al.left+aj/6,al.top+aj-1)}},this)};L.prototype.paintRadio=function(ag){var ai=ag.parseBounds();var ah=Math.min(ai.width,ai.height)-2;this.renderer.clip(ag.backgroundClip,function(){this.renderer.circleStroke(ai.left+1,ai.top+1,ah,new z("#DEDEDE"),1,new z("#A5A5A5"));if(ag.node.checked){this.renderer.circle(Math.ceil(ai.left+ah/4)+1,Math.ceil(ai.top+ah/4)+1,Math.floor(ah/2),new z("#424242"))}},this)};L.prototype.paintFormValue=function(ah){var ak=ah.getValue();if(ak.length>0){var ag=ah.node.ownerDocument;var al=ag.createElement("html2canvaswrapper");var ai=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];ai.forEach(function(am){try{al.style[am]=ah.css(am)}catch(an){r("html2canvas: Parse: Exception caught in renderFormValue: "+an.message)}});var aj=ah.parseBounds();al.style.position="fixed";al.style.left=aj.left+"px";al.style.top=aj.top+"px";al.textContent=ak;ag.body.appendChild(al);this.paintText(new T(al.firstChild,ah));ag.body.removeChild(al)}};L.prototype.paintText=function(ah){ah.applyTextTransform();var ag=O.ucs2.decode(ah.node.data);var am=(!this.options.letterRendering||K(ah))&&!v(ah.node.data)?W(ag):ag.map(function(an){return O.ucs2.encode([an])});var al=ah.parent.fontWeight();var ai=ah.parent.css("fontSize");var aj=ah.parent.css("fontFamily");var ak=ah.parent.parseTextShadows();this.renderer.font(ah.parent.color("color"),ah.parent.css("fontStyle"),ah.parent.css("fontVariant"),al,ai,aj);if(ak.length){this.renderer.fontShadow(ak[0].color,ak[0].offsetX,ak[0].offsetY,ak[0].blur)}else{this.renderer.clearShadow()}this.renderer.clip(ah.parent.clip,function(){am.map(this.parseTextBounds(ah),this).forEach(function(ao,an){if(ao){this.renderer.text(am[an],ao.left,ao.bottom);this.renderTextDecoration(ah.parent,ao,this.fontMetrics.getMetrics(aj,ai))}},this)},this)};L.prototype.renderTextDecoration=function(ag,ai,ah){switch(ag.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(ai.left,Math.round(ai.top+ah.baseline+ah.lineWidth),ai.width,1,ag.color("color"));break;case"overline":this.renderer.rectangle(ai.left,Math.round(ai.top),ai.width,1,ag.color("color"));break;case"line-through":this.renderer.rectangle(ai.left,Math.ceil(ai.top+ah.middle+ah.lineWidth),ai.width,1,ag.color("color"));break}};var F={inset:[["darken",0.6],["darken",0.1],["darken",0.1],["darken",0.6]]};L.prototype.parseBorders=function(ah){var ai=ah.parseBounds();var ag=h(ah);var ak=["Top","Right","Bottom","Left"].map(function(an,am){var ap=ah.css("border"+an+"Style");var al=ah.color("border"+an+"Color");if(ap==="inset"&&al.isBlack()){al=new z([255,255,255,al.a])}var ao=F[ap]?F[ap][am]:null;return{width:ah.cssInt("border"+an+"Width"),color:ao?al[ao[0]](ao[1]):al,args:null}});var aj=k(ai,ag,ak);return{clip:this.parseBackgroundClip(ah,aj,ak,ag,ai),borders:G(ak,ai,aj,ag)}};function G(aj,ah,ai,ag){return aj.map(function(al,am){if(al.width>0){var ao=ah.left;var an=ah.top;var ap=ah.width;var ak=ah.height-(aj[2].width);switch(am){case 0:ak=aj[0].width;al.args=S({c1:[ao,an],c2:[ao+ap,an],c3:[ao+ap-aj[1].width,an+ak],c4:[ao+aj[3].width,an+ak]},ag[0],ag[1],ai.topLeftOuter,ai.topLeftInner,ai.topRightOuter,ai.topRightInner);break;case 1:ao=ah.left+ah.width-(aj[1].width);ap=aj[1].width;al.args=S({c1:[ao+ap,an],c2:[ao+ap,an+ak+aj[2].width],c3:[ao,an+ak],c4:[ao,an+aj[0].width]},ag[1],ag[2],ai.topRightOuter,ai.topRightInner,ai.bottomRightOuter,ai.bottomRightInner);break;case 2:an=(an+ah.height)-(aj[2].width);ak=aj[2].width;al.args=S({c1:[ao+ap,an+ak],c2:[ao,an+ak],c3:[ao+aj[3].width,an],c4:[ao+ap-aj[3].width,an]},ag[2],ag[3],ai.bottomRightOuter,ai.bottomRightInner,ai.bottomLeftOuter,ai.bottomLeftInner);break;case 3:ap=aj[3].width;al.args=S({c1:[ao,an+ak+aj[2].width],c2:[ao,an],c3:[ao+ap,an+aj[0].width],c4:[ao+ap,an+ak]},ag[3],ag[0],ai.bottomLeftOuter,ai.bottomLeftInner,ai.topLeftOuter,ai.topLeftInner);break}}return al})}L.prototype.parseBackgroundClip=function(ah,al,am,ag,ak){var aj=ah.css("backgroundClip"),ai=[];switch(aj){case"content-box":case"padding-box":ad(ai,ag[0],ag[1],al.topLeftInner,al.topRightInner,ak.left+am[3].width,ak.top+am[0].width);ad(ai,ag[1],ag[2],al.topRightInner,al.bottomRightInner,ak.left+ak.width-am[1].width,ak.top+am[0].width);ad(ai,ag[2],ag[3],al.bottomRightInner,al.bottomLeftInner,ak.left+ak.width-am[1].width,ak.top+ak.height-am[2].width);ad(ai,ag[3],ag[0],al.bottomLeftInner,al.topLeftInner,ak.left+am[3].width,ak.top+ak.height-am[2].width);break;default:ad(ai,ag[0],ag[1],al.topLeftOuter,al.topRightOuter,ak.left,ak.top);ad(ai,ag[1],ag[2],al.topRightOuter,al.bottomRightOuter,ak.left+ak.width,ak.top);ad(ai,ag[2],ag[3],al.bottomRightOuter,al.bottomLeftOuter,ak.left+ak.width,ak.top+ak.height);ad(ai,ag[3],ag[0],al.bottomLeftOuter,al.topLeftOuter,ak.left,ak.top+ak.height);break}return ai};function t(ao,an,ak,aj){var am=4*((Math.sqrt(2)-1)/3);var ai=(ak)*am,ag=(aj)*am,al=ao+ak,ah=an+aj;return{topLeft:ae({x:ao,y:ah},{x:ao,y:ah-ag},{x:al-ai,y:an},{x:al,y:an}),topRight:ae({x:ao,y:an},{x:ao+ai,y:an},{x:al,y:ah-ag},{x:al,y:ah}),bottomRight:ae({x:al,y:an},{x:al,y:an+ag},{x:ao+ai,y:ah},{x:ao,y:ah}),bottomLeft:ae({x:al,y:ah},{x:al-ai,y:ah},{x:ao,y:an+ag},{x:ao,y:an})}}function k(aj,ag,ai){var an=aj.left,ak=aj.top,at=aj.width,ar=aj.height,au=ag[0][0]<at/2?ag[0][0]:at/2,am=ag[0][1]<ar/2?ag[0][1]:ar/2,ax=ag[1][0]<at/2?ag[1][0]:at/2,ap=ag[1][1]<ar/2?ag[1][1]:ar/2,ay=ag[2][0]<at/2?ag[2][0]:at/2,aq=ag[2][1]<ar/2?ag[2][1]:ar/2,aw=ag[3][0]<at/2?ag[3][0]:at/2,ao=ag[3][1]<ar/2?ag[3][1]:ar/2;var al=at-ax,az=ar-aq,ah=at-ay,av=ar-ao;return{topLeftOuter:t(an,ak,au,am).topLeft.subdivide(0.5),topLeftInner:t(an+ai[3].width,ak+ai[0].width,Math.max(0,au-ai[3].width),Math.max(0,am-ai[0].width)).topLeft.subdivide(0.5),topRightOuter:t(an+al,ak,ax,ap).topRight.subdivide(0.5),topRightInner:t(an+Math.min(al,at+ai[3].width),ak+ai[0].width,(al>at+ai[3].width)?0:ax-ai[3].width,ap-ai[0].width).topRight.subdivide(0.5),bottomRightOuter:t(an+ah,ak+az,ay,aq).bottomRight.subdivide(0.5),bottomRightInner:t(an+Math.min(ah,at-ai[3].width),ak+Math.min(az,ar+ai[0].width),Math.max(0,ay-ai[1].width),aq-ai[2].width).bottomRight.subdivide(0.5),bottomLeftOuter:t(an,ak+av,aw,ao).bottomLeft.subdivide(0.5),bottomLeftInner:t(an+ai[3].width,ak+av,Math.max(0,aw-ai[3].width),ao-ai[2].width).bottomLeft.subdivide(0.5)}}function ae(ak,aj,ai,ag){var ah=function(am,al,an){return{x:am.x+(al.x-am.x)*an,y:am.y+(al.y-am.y)*an}};return{start:ak,startControl:aj,endControl:ai,end:ag,subdivide:function(an){var ap=ah(ak,aj,an),aq=ah(aj,ai,an),ar=ah(ai,ag,an),ao=ah(ap,aq,an),al=ah(aq,ar,an),am=ah(ao,al,an);return[ae(ak,ap,ao,am),ae(am,al,ar,ag)]},curveTo:function(al){al.push(["bezierCurve",aj.x,aj.y,ai.x,ai.y,ag.x,ag.y])},curveToReversed:function(al){al.push(["bezierCurve",ai.x,ai.y,aj.x,aj.y,ak.x,ak.y])}}}function S(am,ak,aj,an,ah,al,ag){var ai=[];if(ak[0]>0||ak[1]>0){ai.push(["line",an[1].start.x,an[1].start.y]);an[1].curveTo(ai)}else{ai.push(["line",am.c1[0],am.c1[1]])}if(aj[0]>0||aj[1]>0){ai.push(["line",al[0].start.x,al[0].start.y]);al[0].curveTo(ai);ai.push(["line",ag[0].end.x,ag[0].end.y]);ag[0].curveToReversed(ai)}else{ai.push(["line",am.c2[0],am.c2[1]]);ai.push(["line",am.c3[0],am.c3[1]])}if(ak[0]>0||ak[1]>0){ai.push(["line",ah[1].end.x,ah[1].end.y]);ah[1].curveToReversed(ai)}else{ai.push(["line",am.c4[0],am.c4[1]])}return ai}function ad(ak,al,aj,ai,ah,ag,am){if(al[0]>0||al[1]>0){ak.push(["line",ai[0].start.x,ai[0].start.y]);ai[0].curveTo(ak);ai[1].curveTo(ak)}else{ak.push(["line",ag,am])}if(aj[0]>0||aj[1]>0){ak.push(["line",ah[0].start.x,ah[0].start.y])}}function e(ag){return ag.cssInt("zIndex")<0}function E(ag){return ag.cssInt("zIndex")>0}function I(ag){return ag.cssInt("zIndex")===0}function u(ag){return["inline","inline-block","inline-table"].indexOf(ag.css("display"))!==-1}function A(ag){return(ag instanceof g)}function w(ag){return ag.node.data.trim().length>0}function K(ag){return(/^(normal|none|0px)$/.test(ag.parent.css("letterSpacing")))}function h(ag){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(ai){var aj=ag.css("border"+ai+"Radius");var ah=aj.split(" ");if(ah.length<=1){ah[1]=ah[0]}return ah.map(m)})}function R(ag){return(ag.nodeType===Node.TEXT_NODE||ag.nodeType===Node.ELEMENT_NODE)}function q(ah){var ag=ah.css("position");var ai=(["absolute","relative","fixed"].indexOf(ag)!==-1)?ah.css("zIndex"):"auto";return ai!=="auto"}function Z(ag){return ag.css("position")!=="static"}function N(ag){return ag.css("float")!=="none"}function Y(ag){return["inline-block","inline-table"].indexOf(ag.css("display"))!==-1}function Q(ah){var ag=this;return function(){return !ah.apply(ag,arguments)}}function aa(ag){return ag.node.nodeType===Node.ELEMENT_NODE}function f(ag){return ag.isPseudoElement===true}function y(ag){return ag.node.nodeType===Node.TEXT_NODE}function C(ag){return function(ai,ah){return(ai.cssInt("zIndex")+(ag.indexOf(ai)/ag.length))-(ah.cssInt("zIndex")+(ag.indexOf(ah)/ag.length))}}function M(ag){return ag.getOpacity()<1}function m(ag){return parseInt(ag,10)}function ab(ag){return ag.width}function J(ag){return(ag.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(ag.node.nodeName)===-1)}function H(ag){return[].concat.apply([],ag)}function n(ag){var ah=ag.substr(0,1);return(ah===ag.substr(ag.length-1)&&ah.match(/'|"/))?ag.substr(1,ag.length-2):ag}function W(ag){var ak=[],ah=0,aj=false,ai;while(ag.length){if(X(ag[ah])===aj){ai=ag.splice(0,ah);if(ai.length){ak.push(O.ucs2.encode(ai))}aj=!aj;ah=0}else{ah++}if(ah>=ag.length){ai=ag.splice(0,ah);if(ai.length){ak.push(O.ucs2.encode(ai))}}}return ak}function X(ag){return[32,13,10,9,45].indexOf(ag)!==-1}function v(ag){return(/[^\u0000-\u00ff]/).test(ag)}j.exports=L},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(h,i,l){var o=h("./xhr");var t=h("./utils");var k=h("./log");var s=h("./clone");var n=t.decode64;function m(x,z,v){var u=("withCredentials" in new XMLHttpRequest());if(!z){return Promise.reject("No proxy configured")}var y=e(u);var w=p(z,x,y);return u?o(w):(q(v,w,y).then(function(A){return n(A.content)}))}var f=0;function g(w,z,u){var y=("crossOrigin" in new Image());var x=e(y);var v=p(z,w,x);return(y?Promise.resolve(v):q(u,v,x).then(function(A){return"data:"+A.type+";base64,"+A.content}))}function q(u,v,w){return new Promise(function(A,z){var y=u.createElement("script");var x=function(){delete window.html2canvas.proxy[w];u.body.removeChild(y)};window.html2canvas.proxy[w]=function(B){x();A(B)};y.src=v;y.onerror=function(B){x();z(B)};u.body.appendChild(y)})}function e(u){return !u?"html2canvas_"+Date.now()+"_"+(++f)+"_"+Math.round(Math.random()*100000):""}function p(w,u,v){return w+"?url="+encodeURIComponent(u)+(v.length?"&callback=html2canvas.proxy."+v:"")}function j(u){return function(x){var B=new DOMParser(),A;try{A=B.parseFromString(x,"text/html")}catch(z){k("DOMParser not supported, falling back to createHTMLDocument");A=document.implementation.createHTMLDocument("");try{A.open();A.write(x);A.close()}catch(w){k("createHTMLDocument write not supported, falling back to document.body.innerHTML");A.body.innerHTML=x}}var v=A.querySelector("base");if(!v||!v.href.host){var y=A.createElement("base");y.href=u;A.head.insertBefore(y,A.head.firstChild)}return A}}function r(z,x,v,y,u,w){return new m(z,x,window.document).then(j(z)).then(function(A){return s(A,v,y,u,w,0,0)})}l.Proxy=m;l.ProxyURL=g;l.loadUrlDocument=r},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(i,h,g){var e=i("./proxy").ProxyURL;function f(m,k){var l=document.createElement("a");l.href=m;m=l.href;this.src=m;this.image=new Image();var j=this;this.promise=new Promise(function(o,n){j.image.crossOrigin="Anonymous";j.image.onload=o;j.image.onerror=n;new e(m,k,document).then(function(p){j.image.src=p})["catch"](n)})}h.exports=f},{"./proxy":16}],18:[function(h,g,f){var e=h("./nodecontainer");function i(l,k,j){e.call(this,l,k);this.isPseudoElement=true;this.before=j===":before"}i.prototype.cloneTo=function(j){i.prototype.cloneTo.call(this,j);j.isPseudoElement=true;j.before=this.before};i.prototype=Object.create(e.prototype);i.prototype.appendToDOM=function(){if(this.before){this.parent.node.insertBefore(this.node,this.parent.node.firstChild)}else{this.parent.node.appendChild(this.node)}this.parent.node.className+=" "+this.getHideClass()};i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")};i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]};i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";g.exports=i},{"./nodecontainer":14}],19:[function(h,f,e){var g=h("./log");function i(n,l,k,m,j){this.width=n;this.height=l;this.images=k;this.options=m;this.document=j}i.prototype.renderImage=function(k,j,r,q){var o=k.cssInt("paddingLeft"),t=k.cssInt("paddingTop"),n=k.cssInt("paddingRight"),m=k.cssInt("paddingBottom"),p=r.borders;var l=j.width-(p[1].width+p[3].width+o+n);var s=j.height-(p[0].width+p[2].width+t+m);this.drawImage(q,0,0,q.image.width||l,q.image.height||s,j.left+o+p[3].width,j.top+t+p[0].width,l,s)};i.prototype.renderBackground=function(j,k,l){if(k.height>0&&k.width>0){this.renderBackgroundColor(j,k);this.renderBackgroundImage(j,k,l)}};i.prototype.renderBackgroundColor=function(j,l){var k=j.color("backgroundColor");if(!k.isTransparent()){this.rectangle(l.left,l.top,l.width,l.height,k)}};i.prototype.renderBorders=function(j){j.forEach(this.renderBorder,this)};i.prototype.renderBorder=function(j){if(!j.color.isTransparent()&&j.args!==null){this.drawShape(j.args,j.color)}};i.prototype.renderBackgroundImage=function(k,l,m){var j=k.parseBackgroundImages();j.reverse().forEach(function(r,o,n){switch(r.method){case"url":var q=this.images.get(r.args[0]);if(q){this.renderBackgroundRepeating(k,l,q,n.length-(o+1),m)}else{g("Error loading background-image",r.args[0])}break;case"linear-gradient":case"gradient":var p=this.images.get(r.value);if(p){this.renderBackgroundGradient(p,l,m)}else{g("Error loading background-image",r.args[0])}break;case"none":break;default:g("Unknown background-image type",r.args[0])}},this)};i.prototype.renderBackgroundRepeating=function(k,o,m,l,q){var n=k.parseBackgroundSize(o,m.image,l);var j=k.parseBackgroundPosition(o,m.image,l,n);var p=k.parseBackgroundRepeat(l);switch(p){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(m,j,n,o,o.left+q[3],o.top+j.top+q[0],99999,n.height,q);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(m,j,n,o,o.left+j.left+q[3],o.top+q[0],n.width,99999,q);break;case"no-repeat":this.backgroundRepeatShape(m,j,n,o,o.left+j.left+q[3],o.top+j.top+q[0],n.width,n.height,q);break;default:this.renderBackgroundRepeat(m,j,n,{top:o.top,left:o.left},q[3],q[0]);break}};f.exports=i},{"./log":13}],20:[function(k,h,g){var l=k("../renderer");var f=k("../lineargradientcontainer");var i=k("../log");function e(n,m){l.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");if(!this.options.canvas){this.canvas.width=n;this.canvas.height=m}this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};i("Initialized CanvasRenderer with size",n,"x",m)}e.prototype=Object.create(l.prototype);e.prototype.setFillStyle=function(m){this.ctx.fillStyle=typeof(m)==="object"&&!!m.isColor?m.toString():m;return this.ctx};e.prototype.rectangle=function(q,p,o,m,n){this.setFillStyle(n).fillRect(q,p,o,m)};e.prototype.circle=function(p,o,n,m){this.setFillStyle(m);this.ctx.beginPath();this.ctx.arc(p+n/2,o+n/2,n/2,0,Math.PI*2,true);this.ctx.closePath();this.ctx.fill()};e.prototype.circleStroke=function(r,q,n,m,p,o){this.circle(r,q,n,m);this.ctx.strokeStyle=o.toString();this.ctx.stroke()};e.prototype.drawShape=function(n,m){this.shape(n);this.setFillStyle(m).fill()};e.prototype.taints=function(m){if(m.tainted===null){this.taintCtx.drawImage(m.image,0,0);try{this.taintCtx.getImageData(0,0,1,1);m.tainted=false}catch(n){this.taintCtx=document.createElement("canvas").getContext("2d");m.tainted=true}}return m.tainted};e.prototype.drawImage=function(p,r,q,s,n,u,t,m,o){if(!this.taints(p)||this.options.allowTaint){this.ctx.drawImage(p.image,r,q,s,n,u,t,m,o)}};e.prototype.clip=function(m,o,n){this.ctx.save();m.filter(j).forEach(function(p){this.shape(p).clip()},this);o.call(n);this.ctx.restore()};e.prototype.shape=function(m){this.ctx.beginPath();m.forEach(function(n,o){if(n[0]==="rect"){this.ctx.rect.apply(this.ctx,n.slice(1))}else{this.ctx[(o===0)?"moveTo":n[0]+"To"].apply(this.ctx,n.slice(1))}},this);this.ctx.closePath();return this.ctx};e.prototype.font=function(m,q,o,r,n,p){this.setFillStyle(m).font=[q,o,r,n,p].join(" ").split(",")[0]};e.prototype.fontShadow=function(n,m,p,o){this.setVariable("shadowColor",n.toString()).setVariable("shadowOffsetY",m).setVariable("shadowOffsetX",p).setVariable("shadowBlur",o)};e.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")};e.prototype.setOpacity=function(m){this.ctx.globalAlpha=m};e.prototype.setTransform=function(m){this.ctx.translate(m.origin[0],m.origin[1]);this.ctx.transform.apply(this.ctx,m.matrix);this.ctx.translate(-m.origin[0],-m.origin[1])};e.prototype.setVariable=function(n,m){if(this.variables[n]!==m){this.variables[n]=this.ctx[n]=m}return this};e.prototype.text=function(o,n,m){this.ctx.fillText(o,n,m)};e.prototype.backgroundRepeatShape=function(r,o,v,m,p,s,n,u,t){var q=[["line",Math.round(p),Math.round(s)],["line",Math.round(p+n),Math.round(s)],["line",Math.round(p+n),Math.round(u+s)],["line",Math.round(p),Math.round(u+s)]];this.clip([q],function(){this.renderBackgroundRepeat(r,o,v,m,t[3],t[0])},this)};e.prototype.renderBackgroundRepeat=function(o,n,p,q,r,t){var m=Math.round(q.left+n.left+r),s=Math.round(q.top+n.top+t);this.setFillStyle(this.ctx.createPattern(this.resizeImage(o,p),"repeat"));this.ctx.translate(m,s);this.ctx.fill();this.ctx.translate(-m,-s)};e.prototype.renderBackgroundGradient=function(o,m){if(o instanceof f){var n=this.ctx.createLinearGradient(m.left+m.width*o.x0,m.top+m.height*o.y0,m.left+m.width*o.x1,m.top+m.height*o.y1);o.colorStops.forEach(function(p){n.addColorStop(p.stop,p.color.toString())});this.rectangle(m.left,m.top,m.width,m.height,n)}};e.prototype.resizeImage=function(o,p){var q=o.image;if(q.width===p.width&&q.height===p.height){return q}var m,n=document.createElement("canvas");n.width=p.width;n.height=p.height;m=n.getContext("2d");m.drawImage(q,0,0,q.width,q.height,0,0,p.width,p.height);return n};function j(m){return m.length>0}h.exports=e},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(i,h,g){var e=i("./nodecontainer");function f(l,j,k,m){e.call(this,k,m);this.ownStacking=l;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*j}f.prototype=Object.create(e.prototype);f.prototype.getParentStack=function(k){var j=(this.parent)?this.parent.stack:null;return j?(j.ownStacking?j:j.getParentStack(k)):k.stack};h.exports=f},{"./nodecontainer":14}],22:[function(h,g,f){function e(i){this.rangeBounds=this.testRangeBounds(i);this.cors=this.testCORS();this.svg=this.testSVG()}e.prototype.testRangeBounds=function(i){var k,n,m,j,l=false;if(i.createRange){k=i.createRange();if(k.getBoundingClientRect){n=i.createElement("boundtest");n.style.height="123px";n.style.display="block";i.body.appendChild(n);k.selectNode(n);m=k.getBoundingClientRect();j=m.height;if(j===123){l=true}i.body.removeChild(n)}}return l};e.prototype.testCORS=function(){return typeof((new Image()).crossOrigin)!=="undefined"};e.prototype.testSVG=function(){var j=new Image();var k=document.createElement("canvas");var i=k.getContext("2d");j.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(j,0,0);k.toDataURL()}catch(l){return false}return true};g.exports=e},{}],23:[function(j,g,e){var i=j("./xhr");var f=j("./utils").decode64;function h(l){this.src=l;this.image=null;var k=this;this.promise=this.hasFabric().then(function(){return(k.isInline(l)?Promise.resolve(k.inlineFormatting(l)):i(l))}).then(function(m){return new Promise(function(n){window.html2canvas.svg.fabric.loadSVGFromString(m,k.createCanvas.call(k,n))})})}h.prototype.hasFabric=function(){return !window.html2canvas.svg||!window.html2canvas.svg.fabric?Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg")):Promise.resolve()};h.prototype.inlineFormatting=function(k){return(/^data:image\/svg\+xml;base64,/.test(k))?this.decode64(this.removeContentType(k)):this.removeContentType(k)};h.prototype.removeContentType=function(k){return k.replace(/^data:image\/svg\+xml(;base64)?,/,"")};h.prototype.isInline=function(k){return(/^data:image\/svg\+xml/i.test(k))};h.prototype.createCanvas=function(l){var k=this;return function(o,n){var m=new window.html2canvas.svg.fabric.StaticCanvas("c");k.image=m.lowerCanvasEl;m.setWidth(n.width).setHeight(n.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(o,n)).renderAll();l(m.lowerCanvasEl)}};h.prototype.decode64=function(k){return(typeof(window.atob)==="function")?window.atob(k):f(k)};g.exports=h},{"./utils":26,"./xhr":28}],24:[function(h,f,e){var g=h("./svgcontainer");function i(k,l){this.src=k;this.image=null;var j=this;this.promise=l?new Promise(function(n,m){j.image=new Image();j.image.onload=n;j.image.onerror=m;j.image.src="data:image/svg+xml,"+(new XMLSerializer()).serializeToString(k);if(j.image.complete===true){n(j.image)}}):this.hasFabric().then(function(){return new Promise(function(m){window.html2canvas.svg.fabric.parseSVGDocument(k,j.createCanvas.call(j,m))})})}i.prototype=Object.create(g.prototype);f.exports=i},{"./svgcontainer":23}],25:[function(j,i,f){var e=j("./nodecontainer");function g(l,k){e.call(this,l,k)}g.prototype=Object.create(e.prototype);g.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))};g.prototype.transform=function(k){var l=this.node.data;switch(k){case"lowercase":return l.toLowerCase();case"capitalize":return l.replace(/(^|\s|:|-|\(|\))([a-z])/g,h);case"uppercase":return l.toUpperCase();default:return l}};function h(k,n,l){if(k.length>0){return n+l.toUpperCase()}}i.exports=g},{"./nodecontainer":14}],26:[function(g,f,e){e.smallImage=function h(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};e.bind=function(j,i){return function(){return j.apply(i,arguments)}};e.decode64=function(o){var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var p=o.length,n,l,k,j,u,t,s,r;var m="";for(n=0;n<p;n+=4){l=q.indexOf(o[n]);k=q.indexOf(o[n+1]);j=q.indexOf(o[n+2]);u=q.indexOf(o[n+3]);t=(l<<2)|(k>>4);s=((k&15)<<4)|(j>>2);r=((j&3)<<6)|u;if(j===64){m+=String.fromCharCode(t)}else{if(u===64||u===-1){m+=String.fromCharCode(t,s)}else{m+=String.fromCharCode(t,s,r)}}}return m};e.getBounds=function(j){if(j.getBoundingClientRect){var k=j.getBoundingClientRect();var i=j.offsetWidth==null?k.width:j.offsetWidth;return{top:k.top,bottom:k.bottom||(k.top+k.height),right:k.left+i,left:k.left,width:i,height:j.offsetHeight==null?k.height:j.offsetHeight}}return{}};e.offsetBounds=function(j){var i=j.offsetParent?e.offsetBounds(j.offsetParent):{top:0,left:0};return{top:j.offsetTop+i.top,bottom:j.offsetTop+j.offsetHeight+i.top,right:j.offsetLeft+i.left+j.offsetWidth,left:j.offsetLeft+i.left,width:j.offsetWidth,height:j.offsetHeight}};e.parseBackgrounds=function(r){var k=" \r\n\t",j,l,p,u,m,n=[],o=0,s=0,i,q;var t=function(){if(j){if(l.substr(0,1)==='"'){l=l.substr(1,l.length-2)}if(l){q.push(l)}if(j.substr(0,1)==="-"&&(u=j.indexOf("-",1)+1)>0){p=j.substr(0,u);j=j.substr(u)}n.push({prefix:p,method:j.toLowerCase(),value:m,args:q,image:null})}q=[];j=p=l=m=""};q=[];j=p=l=m="";r.split("").forEach(function(v){if(o===0&&k.indexOf(v)>-1){return}switch(v){case'"':if(!i){i=v}else{if(i===v){i=null}}break;case"(":if(i){break}else{if(o===0){o=1;m+=v;return}else{s++}}break;case")":if(i){break}else{if(o===1){if(s===0){o=0;m+=v;t();return}else{s--}}}break;case",":if(i){break}else{if(o===0){t();return}else{if(o===1){if(s===0&&!j.match(/^url$/i)){q.push(l);l="";m+=v;return}}}}break}m+=v;if(o===0){j+=v}else{l+=v}});t();return n}},{}],27:[function(h,g,e){var i=h("./gradientcontainer");function f(j){i.apply(this,arguments);this.type=j.args[0]==="linear"?i.TYPES.LINEAR:i.TYPES.RADIAL}f.prototype=Object.create(i.prototype);g.exports=f},{"./gradientcontainer":9}],28:[function(h,f,e){function g(i){return new Promise(function(k,j){var l=new XMLHttpRequest();l.open("GET",i);l.onload=function(){if(l.status===200){k(l.responseText)}else{j(new Error(l.statusText))}};l.onerror=function(){j(new Error("Network Error"))};l.send()})}f.exports=g},{}]},{},[4])(4)});
;(function(f,c){"undefined"!==typeof module?module.exports=c():"function"===typeof define&&"object"===typeof define.amd?define(c):this[f]=c()})("clipboard",function(){if("undefined"===typeof document||!document.addEventListener)return null;var f={};f.copy=function(){function c(){d=!1;b=null;e&&window.getSelection().removeAllRanges();e=!1}var d=!1,b=null,e=!1;document.addEventListener("copy",function(c){if(d){for(var e in b)c.clipboardData.setData(e,b[e]);c.preventDefault()}});return function(g){return new Promise(function(k,f){d=!0;b="string"===typeof g?{"text/plain":g}:g instanceof Node?{"text/html":(new XMLSerializer).serializeToString(g)}:g;try{var n=document.getSelection();if(!document.queryCommandEnabled("copy")&&n.isCollapsed){var l=document.createRange();l.selectNodeContents(document.body);n.addRange(l);e=!0}if(document.execCommand("copy"))c(),k();else throw Error("Unable to copy. Perhaps it's not available in your browser?");}catch(p){c(),f(p)}})}}();f.paste=function(){var c=!1,d,b;document.addEventListener("paste",function(e){if(c){c=!1;e.preventDefault();var g=d;d=null;g(e.clipboardData.getData(b))}});return function(e){return new Promise(function(g,f){c=!0;d=g;b=e||"text/plain";try{document.execCommand("paste")||(c=!1,f(Error("Unable to paste. Pasting only works in Internet Explorer at the moment.")))}catch(m){c=!1,f(Error(m))}})}}();"undefined"===typeof ClipboardEvent&&"undefined"!==typeof window.clipboardData&&"undefined"!==typeof window.clipboardData.setData&&(function(c){function d(a,b){return function(){a.apply(b,arguments)}}function b(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];l(a,d(f,this),d(k,this))}function e(a){var b=this;return null===this._state?void this._deferreds.push(a):void p(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var h;try{h=c(b._value)}catch(d){return void a.reject(d)}a.resolve(h)})}function f(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void l(d(b,a),d(f,this),d(k,this))}this._state=!0;this._value=a;m.call(this)}catch(c){k.call(this,c)}}function k(a){this._state=!1;this._value=a;m.call(this)}function m(){for(var a=0,b=this._deferreds.length;b>a;a++)e.call(this,this._deferreds[a]);this._deferreds=null}function n(a,b,c,h){this.onFulfilled="function"==typeof a?a:null;this.onRejected="function"==typeof b?b:null;this.resolve=c;this.reject=h}function l(a,b,c){var h=!1;try{a(function(a){h||(h=!0,b(a))},function(a){h||(h=!0,c(a))})}catch(d){h||(h=!0,c(d))}}var p=b.immediateFn||"function"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},q=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.prototype["catch"]=function(a){return this.then(null,a)};b.prototype.then=function(a,c){var d=this;return new b(function(b,f){e.call(d,new n(a,c,b,f))})};b.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&q(arguments[0])?arguments[0]:arguments);return new b(function(b,c){function d(e,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var k=g.then;if("function"==typeof k)return void k.call(g,function(a){d(e,a)},c)}a[e]=g;0===--f&&b(a)}catch(l){c(l)}}if(0===a.length)return b([]);for(var f=a.length,e=0;e<a.length;e++)d(e,a[e])})};b.resolve=function(a){return a&&"object"==typeof a&&a.constructor===b?a:new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})};"undefined"!=typeof module&&module.exports?module.exports=b:c.Promise||(c.Promise=b)}(this),f.copy=function(c){return new Promise(function(d,b){if("string"!==typeof c&&!("text/plain"in c))throw Error("You must provide a text/plain type.");window.clipboardData.setData("Text","string"===typeof c?c:c["text/plain"])?d():b(Error("Copying was rejected."))})},f.paste=function(){return new Promise(function(c,d){var b=window.clipboardData.getData("Text");b?c(b):d(Error("Pasting was rejected."))})});return f});
;try{protocol=window.location.protocol;host=window.location.host;window._exurl=protocol+"//"+host;_.templateSettings={evaluate:/{([\s\S]+?)}/g,interpolate:/{=([\s\S]+?)}/g,escape:/{-([\s\S]+?)}/g};$(document).ready(function(){$("body").addClass("K-stylesheet-default");var b=0;for(var a in _jstemplates){_jstemplates[a](K[a].installation);b++}K.Info.installed=true;if(b>0){K.Tool.log(b+" toolkits installed.  K.Tool.getVersion()"+K.Tool.getVersion())}else{K.Tool.log("K.Tool.getVersion()"+K.Tool.getVersion())}})}catch(e){console.log("ts-error")}window.K=window.K||{URL:{defaultTemplates:""}};window._jstemplates=window._jstemplates||{};K=$.extend(K,{Tool:{install:function(){K.Tool.log("The method [K.Tool.install] has been abolished");return K.Tool},log:function(a){console.log("K-Log: "+a)},getDomPos:function(a){var c={top:0,left:0},b=a[0];if(b.offsetParent){while(b.offsetParent){c.top+=b.offsetTop;c.left+=b.offsetLeft;b=b.offsetParent}}else{if(b.x){c.left+=b.x}else{if(b.y){c.top+=b.y}}}return{x:c.left,y:c.top}},done:function(a){if(typeof(a)=="function"){a()}return K.Tool},setURL:function(a){$.extend(K.URL,a)},getVersion:function(){return K.Info.version},copy:function(b){var a="";if(typeof(b)=="string"){a=b}else{a=$(b).text()}clipboard.copy(a)},getFormJSON:function(a){var a=$(a),b={};a.find("input").each(function(){var f=$(this),c=f.attr("name")||"",d=(f.attr("type")||"").toLowerCase();if($.trim(c).length>0){switch(d){case"select":b[c]=f.children("option:selected").attr("value");break;case"radio":b[c]=a.find("input[name='"+c+"']:checked").val();break;default:b[c]=f.val()}}});return b},setData:function(d,a,c){var b="__K.js.obj";if(typeof(c)!="string"){$(d).data("data-"+a,c);$(d).attr("data-"+a,b)}else{$(d).attr("data-"+a,c)}return d},getData:function(h,d){var f="__K.js.obj";if(d){var b=$(h).attr("data-"+d);if(b==f){return $(h).data("data-"+d)}else{return b}}else{var g={};for(var c=0;c<$(h)[0].attributes.length;c++){var a=$(h)[0].attributes[c].name,b=$(h)[0].attributes[c].value;if(a.length<=5||a.substring(0,5)!="data-"){continue}if(b==f){g[a.replace("data-","")]=$(h).data(a)}else{g[a.replace("data-","")]=b}}return g}},deleteData:function(f,d){if(d){$(f).removeData("data-"+d);$(f).removeAttr("data-"+d)}else{for(var c=$(f)[0].attributes.length-1;c>0;c--){var b=$(f)[0].attributes[c].name,a=$(f)[0].attributes[c].value;if(b.length<=5||b.substring(0,5)!="data-"){continue}$(f).removeData(b);$(f).removeAttr(b)}}return f},domPrint:function(b,a){html2canvas($(b)[0],{onrendered:function(d){var g=d.toDataURL();var c=function(h){h=h.toLowerCase().replace(/jpg/i,"jpeg");var i=h.match(/png|jpeg|bmp|gif/)[0];return"image/"+i};g=g.replace(c("png"),"image/octet-stream");var f=function(k,h){var i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.href=k;i.download=h;var j=document.createEvent("MouseEvents");j.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);i.dispatchEvent(j)};f(g,a+".png")}})}},Templates:{},Installations:[],Installations2:[],LeftMenu:{View:null,template:{name:"default",url:"template.html"},installation:function(){K.LeftMenu.View=Backbone.View.extend({tagName:"div",className:"el-wrapper",template:_.template($("#_template>#t_leftmenu").text()),dataURL:false,data:false,events:{onclick:function(){}},wrapper:null,setData:function(a){if(typeof(a)=="string"){this.dataURL=a}else{this.data=a}return this},setURL:function(a){this.dataURL=a;return this},to:function(a,b){this.wrapper=a;this.$el.empty();this.events=$.extend({},this.events);if(this.data){this.render(this.data);a.append(this.$el);this.activate(b)}else{$.ajax({url:this.dataURL||K.URL.leftMenu,dataType:"json",data:{_:$.now()},dom:a,_this:this}).done(function(c){this._this.render(c);this.dom.append(this._this.$el);this._this.activate(b)}).fail(function(f,d,c){K.Tool.log(d)})}return this},activate:function(b){var c=this,a=this.$el;a.off("click");a.on("click",function(d){d.stopPropagation()});a.find(".menu-lv1>li").each(function(){$(this).off("click");$(this).on("click",function(){$(this).siblings().removeClass("active");$(this).addClass("active")});$(this).unbind("hover");$(this).hover(function(d){if($(this).siblings(".active").length>0){$(this).siblings(".active").removeClass("active")}},function(){})});a.find(".menu-lv2>li:not('.leaf')").each(function(){$(this).off("click");$(this).on("click",function(){$(this).toggleClass("active");if($(this).hasClass("active")){$(this).siblings().removeClass("active")}})});a.find(".menu-lv2").css("left",this.wrapper.width()+"px");if(typeof(b)=="string"&&b.length>1&&b.charAt(0)=="#"){a.find(".itemv1-arrow").each(function(){$(this).css("background-color",b)})}a.find(".menu-lv2>.leaf,.menu-lv3>.leaf").each(function(){$(this).off("click")});a.find(".leaf").each(function(){$(this).on("click",function(g,f,d){return function(j){j.stopPropagation();g.$el.find(".leaf").removeClass("active");f.addClass("active");var i=f.parent().hasClass("menu-lv1")?f:g.$el.find(".menu-lv1").children("li:has('.leaf.active')");if(!i.hasClass("static")){i.addClass("static")}if(!i.hasClass("active")){i.addClass("active")}i.siblings().removeClass("static").removeClass("active");if(d){g.$el.find(".itemv1-arrow").hide();g.$el.find(".static>.itemv1-arrow").show()}var h=[],k=function(l){h.push(l.attr("data-id")+""+$.trim(l.children("nobr").text()));if(!l.parent().hasClass("menu-lv1")){l=l.parent().closest("li");k(l)}else{l=l.parent().closest("li");h.push(l.attr("data-id")+""+$.trim(l.children("nobr").text()))}};k(f);h.reverse();if(h.length>1){h.shift()}g.events.onclick(f,h)}}(c,$(this),b))});$("body").on("click",function(d){return function(){d.$el.find(".menu-lv1>.active").removeClass("active")}}(c))},click:function(a){if(typeof(a)=="function"){this.events.onclick=a}return this},render:function(a){this.$el.html(this.template(a));return this.$el}})},init:function(a,b){a.empty();var c=new K.LeftMenu.View();if(!K.URL.leftMenu){c.setData("../../json/emp/leftmenu.json")}c.to(a,b);return c}},Catalog:{View:null,template:{name:"default",url:"template.html"},installation:function(){K.Catalog.View=Backbone.View.extend({tagName:"div",className:"el-wrapper",template:_.template($("#_template>#t_catalog").text()),data:false,dataURL:false,wrapper:null,render:function(a){this.$el.html(this.template(this.data||a));return this.$el},setData:function(a){if(typeof(a)=="string"){this.dataURL=a}else{this.data=a}return this},to:function(a){this.wrapper=a;this.$el.empty();if(this.data){this.render(this.data)}else{this.render({title:"EPC Soulutions",levels:[]})}a.append(this.$el);return this}})},init:function(a){a.empty();var b=new K.Catalog.View();b.to(a);return b}},Profile:{View:null,template:{name:"default",url:"template.html"},installation:function(){K.Profile.View=Backbone.View.extend({tagName:"div",className:"el-wrapper",template:_.template($("#_template>#t_profile").text()),data:false,dataURL:false,wrapper:null,events:{onclick:function(){}},render:function(a){this.$el.html(this.template(this.data||a));this.$el.css("text-align","center");return this.$el},setData:function(a){if(typeof(a)=="string"){this.dataURL=a}else{this.data=a}return this},setURL:function(a){this.dataURL=a;return this},to:function(a){if(this.data){this.render(this.data);a.append(this.$el);this.activate()}else{$.ajax({url:this.dataURL||K.URL.profile,dataType:"json",data:{_:$.now()},dom:a,_this:this}).done(function(b){this._this.render(b);this.dom.append(this._this.$el);this._this.activate()}).fail(function(d,c,b){K.Tool.log(c)})}return this},activate:function(){var b=this.$el.find(".profile-menu"),a=this;this.$el.find(".user-profile-name").on("click",function(c){return function(d){d.stopPropagation();if(!c.is(":visible")){c.show()}}}(b));b.on("click",function(c){c.stopPropagation()});b.find("li").each(function(){$(this).on("click",function(d,c){return function(){c.events.onclick(d)}}($(this),a))});$("body").on("click",function(c){return function(){c.hide()}}(b))},click:function(a){if(typeof(a)=="function"){this.events.onclick=a}return this}})},init:function(b){b.empty();var a=new K.Profile.View();a.to(b);return a}},HeaderBar:{View:null,template:{name:"default",url:"template.html"},installation:function(){K.HeaderBar.View=Backbone.View.extend({tagName:"div",className:"el-wrapper bg-c1",template:_.template($("#_template>#t_headerbar").text()),data:false,dataURL:false,wrapper:null,events:{onclick:function(){},onsearch:function(){}},logoBGC:false,logoTip:false,render:function(a){this.$el.html(this.template(this.data||a));this.$el.css("height","100%").css("min-height","50px");return this.$el},setData:function(a){if(typeof(a)=="string"){this.dataURL=a}else{this.data=a}return this},setURL:function(a){this.dataURL=a;return this},to:function(a){if(this.data){this.render(this.data);a.append(this.$el);this.activate()}else{$.ajax({url:this.dataURL||K.URL.headerBar,dataType:"json",data:{_:$.now()},dom:a,_this:this}).done(function(b){this._this.render(b);this.dom.append(this._this.$el);this._this.activate()}).fail(function(d,c,b){K.Tool.log(c)})}return this},activate:function(){if(this.logoBGC){this.$el.find(".top-logo").css("background-color",this.logoBGC)}if(this.logoTip){this.$el.find(".top-logo").attr("title",this.logoTip)}var a=this.$el.find(".search-txt"),b=this.$el.find(".search-submit");b.off("mousedown");b.on("mousedown",function(d,c){return function(){if($.trim(c.val()).length>0){d.events.onsearch($.trim(c.val()))}}}(this,a));a.off("keyup");a.on("keyup",function(d,c){return function(f){if(f.keyCode==13&&$.trim(c.val()).length>0){d.events.onsearch($.trim(c.val()))}}}(this,a));return this},click:function(a){if(typeof(a)=="function"){this.events.onclick=a}return this},search:function(a){if(typeof(a)=="function"){this.events.onsearch=a}return this},setLogoBGColor:function(a){this.logoBGC=a;this.activate();return this},setLogoTip:function(a){this.logoTip=a;this.activate();return this}})},init:function(a){a.empty();var b=new K.HeaderBar.View();b.to(a);return b}},Info:{installed:false,developVersion:false,version:"0.1.1"}});